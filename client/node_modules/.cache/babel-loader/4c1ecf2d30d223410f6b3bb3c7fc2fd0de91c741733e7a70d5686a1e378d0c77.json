{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kaurt\\\\Documents\\\\PROJECTS\\\\qr\\\\client\\\\src\\\\components\\\\Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport API from '../api';\nimport QRCode from 'qrcode.react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n    role: 'student'\n  });\n  const [qrToken, setQrToken] = useState('');\n  const navigate = useNavigate();\n  const handleRegister = async e => {\n    e.preventDefault();\n    try {\n      const res = await API.post('/auth/register', form);\n      setQrToken(res.data.qrToken);\n    } catch {\n      alert(\"Registration failed\");\n    }\n  };\n  const downloadQR = () => {\n    const svg = document.getElementById('qr-svg');\n    const svgData = new XMLSerializer().serializeToString(svg);\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const img = new Image();\n    img.onload = () => {\n      canvas.width = img.width;\n      canvas.height = img.height;\n      ctx.drawImage(img, 0, 0);\n      const png = canvas.toDataURL('image/png');\n      const a = document.createElement('a');\n      a.href = png;\n      a.download = 'my_qr.png';\n      a.click();\n    };\n    img.src = `data:image/svg+xml;base64,${btoa(svgData)}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !qrToken ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleRegister,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Name\",\n        value: form.name,\n        onChange: e => setForm({\n          ...form,\n          name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: e => setForm({\n          ...form,\n          email: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: form.password,\n        onChange: e => setForm({\n          ...form,\n          password: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: form.role,\n        onChange: e => setForm({\n          ...form,\n          role: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"student\",\n          children: \"Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"admin\",\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Scan or Download your QR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(QRCode, {\n        id: \"qr-svg\",\n        value: qrToken,\n        size: 256\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: downloadQR,\n        children: \"Download QR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/login'),\n        style: {\n          marginLeft: 10\n        },\n        children: \"Go to Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"CZZ7wC/uKJRagP3Vfhj5obqMmlQ=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","API","QRCode","useNavigate","jsxDEV","_jsxDEV","Register","_s","form","setForm","name","email","password","role","qrToken","setQrToken","navigate","handleRegister","e","preventDefault","res","post","data","alert","downloadQR","svg","document","getElementById","svgData","XMLSerializer","serializeToString","canvas","createElement","ctx","getContext","img","Image","onload","width","height","drawImage","png","toDataURL","a","href","download","click","src","btoa","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","target","type","id","size","onClick","style","marginLeft","_c","$RefreshReg$"],"sources":["C:/Users/kaurt/Documents/PROJECTS/qr/client/src/components/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport API from '../api';\r\nimport QRCode from 'qrcode.react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Register() {\r\n  const [form, setForm] = useState({ name: '', email: '', password: '', role: 'student' });\r\n  const [qrToken, setQrToken] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleRegister = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await API.post('/auth/register', form);\r\n      setQrToken(res.data.qrToken);\r\n    } catch {\r\n      alert(\"Registration failed\");\r\n    }\r\n  };\r\n\r\n  const downloadQR = () => {\r\n    const svg = document.getElementById('qr-svg');\r\n    const svgData = new XMLSerializer().serializeToString(svg);\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      canvas.width = img.width;\r\n      canvas.height = img.height;\r\n      ctx.drawImage(img, 0, 0);\r\n      const png = canvas.toDataURL('image/png');\r\n      const a = document.createElement('a');\r\n      a.href = png; a.download = 'my_qr.png'; a.click();\r\n    };\r\n    img.src = `data:image/svg+xml;base64,${btoa(svgData)}`;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!qrToken ? (\r\n        <form onSubmit={handleRegister}>\r\n          <h2>Register</h2>\r\n          <input placeholder=\"Name\" value={form.name} onChange={e => setForm({ ...form, name: e.target.value })} />\r\n          <input placeholder=\"Email\" value={form.email} onChange={e => setForm({ ...form, email: e.target.value })} />\r\n          <input type=\"password\" placeholder=\"Password\" value={form.password} onChange={e => setForm({ ...form, password: e.target.value })} />\r\n          <select value={form.role} onChange={e => setForm({ ...form, role: e.target.value })}>\r\n            <option value=\"student\">Student</option>\r\n            <option value=\"admin\">Admin</option>\r\n          </select>\r\n          <button type=\"submit\">Register</button>\r\n        </form>\r\n      ) : (\r\n        <div>\r\n          <h3>Scan or Download your QR</h3>\r\n          <QRCode id=\"qr-svg\" value={qrToken} size={256} />\r\n          <button onClick={downloadQR}>Download QR</button>\r\n          <button onClick={() => navigate('/login')} style={{ marginLeft: 10 }}>Go to Login</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}