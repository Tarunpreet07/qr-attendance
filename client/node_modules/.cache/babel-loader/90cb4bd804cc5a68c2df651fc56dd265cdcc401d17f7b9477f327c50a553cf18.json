{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kaurt\\\\Documents\\\\PROJECTS\\\\qr\\\\client\\\\src\\\\components\\\\StudentPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Html5Qrcode } from 'html5-qrcode';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StudentPanel() {\n  _s();\n  const {\n    id\n  } = useParams(); // sessionId\n  const scannerRef = useRef(null);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    const html5QrCode = new Html5Qrcode(\"qr-reader\");\n    Html5Qrcode.getCameras().then(devices => {\n      if (devices.length) {\n        html5QrCode.start(devices[0].id, {\n          fps: 10,\n          qrbox: {\n            width: 250,\n            height: 250\n          }\n        }, async qrCodeMessage => {\n          try {\n            const qrData = JSON.parse(qrCodeMessage);\n            const email = qrData.email;\n            const res = await axios.post('http://localhost:5000/api/attendance/mark', {\n              sessionId: id,\n              email\n            });\n            setMessage(res.data.message);\n          } catch (err) {\n            var _err$response, _err$response$data;\n            setMessage('Error marking attendance: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message));\n          }\n          await html5QrCode.stop();\n        }, errorMessage => {});\n      }\n    }).catch(err => console.error(\"Camera error:\", err));\n    return () => {\n      html5QrCode.stop().catch(err => console.error('Stop error:', err));\n    };\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Mark Attendance for Session: \", id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"qr-reader\",\n      ref: scannerRef,\n      style: {\n        width: '300px',\n        height: '300px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentPanel, \"GSApvDI39G+gNVuUAmSUM1u9F1Y=\", false, function () {\n  return [useParams];\n});\n_c = StudentPanel;\nexport default StudentPanel;\nvar _c;\n$RefreshReg$(_c, \"StudentPanel\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","Html5Qrcode","axios","jsxDEV","_jsxDEV","StudentPanel","_s","id","scannerRef","message","setMessage","html5QrCode","getCameras","then","devices","length","start","fps","qrbox","width","height","qrCodeMessage","qrData","JSON","parse","email","res","post","sessionId","data","err","_err$response","_err$response$data","response","stop","errorMessage","catch","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","style","_c","$RefreshReg$"],"sources":["C:/Users/kaurt/Documents/PROJECTS/qr/client/src/components/StudentPanel.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Html5Qrcode } from 'html5-qrcode';\r\nimport axios from 'axios';\r\n\r\nfunction StudentPanel() {\r\n  const { id } = useParams(); // sessionId\r\n  const scannerRef = useRef(null);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const html5QrCode = new Html5Qrcode(\"qr-reader\");\r\n\r\n    Html5Qrcode.getCameras().then(devices => {\r\n      if (devices.length) {\r\n        html5QrCode.start(\r\n          devices[0].id,\r\n          { fps: 10, qrbox: { width: 250, height: 250 } },\r\n          async qrCodeMessage => {\r\n            try {\r\n              const qrData = JSON.parse(qrCodeMessage);\r\n              const email = qrData.email;\r\n\r\n              const res = await axios.post('http://localhost:5000/api/attendance/mark', {\r\n                sessionId: id,\r\n                email\r\n              });\r\n\r\n              setMessage(res.data.message);\r\n            } catch (err) {\r\n              setMessage('Error marking attendance: ' + (err.response?.data?.message || err.message));\r\n            }\r\n\r\n            await html5QrCode.stop();\r\n          },\r\n          errorMessage => {}\r\n        );\r\n      }\r\n    }).catch(err => console.error(\"Camera error:\", err));\r\n\r\n    return () => {\r\n      html5QrCode.stop().catch(err => console.error('Stop error:', err));\r\n    };\r\n  }, [id]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Mark Attendance for Session: {id}</h2>\r\n      <div id=\"qr-reader\" ref={scannerRef} style={{ width: '300px', height: '300px' }}></div>\r\n      {message && <p>{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StudentPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}